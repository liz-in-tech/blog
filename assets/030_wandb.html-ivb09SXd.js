import{_ as i}from"./030_wandb-AeokTzJo.js";import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as d,o as l,c as o,f as r,a,b as n,d as c,e}from"./app-0IasQefm.js";const p={},u=a("h1",{id:"深度学习轻量级可视化工具wandb",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#深度学习轻量级可视化工具wandb","aria-hidden":"true"},"#"),n(" 深度学习轻量级可视化工具wandb")],-1),h=e('<h2 id="what" tabindex="-1"><a class="header-anchor" href="#what" aria-hidden="true">#</a> what</h2><p>wandb（Weights &amp; Biases）是一个与Tensorboard类似的模型训练可视化平台。不过，相比较TensorBoard而言，Wandb更加的强大，主要体现在以下的几个方面：</p><ul><li>4项核心功能（wandb并不单纯的是一款数据可视化工具。它具有更为强大的模型和数据版本管理。此外，还可以对你训练的模型进行调优） <ul><li>Dashboard 看板：跟踪训练过程，给出可视化结果</li><li>Reports 报告：保存和共享训练过程中一些细节、有价值的信息</li><li>Sweeps 超参调优：使用超参数调优来优化你训练的模型</li><li>Artifacts 工具：数据集和模型版本控制，可以自己搭建pipeline，实现保存数据集和模型以及评估结果的流程</li></ul></li><li>强大兼容性（兼容各种框架和环境）：能够和Jupyter、TensorFlow、Pytorch、Keras、Scikit、fast.ai、LightGBM、XGBoost一起结合使用，可以与各种机器学习基础架构配合使用：AWS，GCP，Kubernetes，Azure和本地机器。</li><li>复现模型：Wandb更有利于复现模型。这是因为Wandb不仅记录指标，还会记录超参数和代码版本。</li><li>自动上传云端：Wandb可以让你便捷地查看你制作的所有模型，你就不必花费大量时间来重新运行旧实验。</li><li>快速、灵活的集成：只需5分钟即可把Wandb加到自己的项目。下载Wandb免费的开源Python包，然后在代码中插入几行，以后你每次运行模型都会得到记录完备的指标和记录。</li><li>集中式指示板：Wandb提供同样的集中式指示板。不管在哪里训练模型，不管是在本地机器、实验室集群还是在云端实例； 这样就不必花时间从别的机器上复制TensorBoard文件。</li><li>强大的表格：对不同模型的结果进行搜索、筛选、分类和分组。可以轻而易举地查看成千上万个模型版本，并找到不同任务的最佳模型。</li><li>运行的同时分析系统硬件的情况如：CPU和GPU使用率</li></ul><figure><img src="'+i+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="常用函数" tabindex="-1"><a class="header-anchor" href="#常用函数" aria-hidden="true">#</a> 常用函数</h2><ul><li>wandb.init() # 初始化 <ul><li>project: 项目名称</li></ul></li><li>wandb.config # 超参数配置</li><li>wandb.log() # 记录训练循环中持续变化的指标</li><li>wandb.Image() # 图像显示</li><li>wandb.save() # 保存模型</li><li>wandb.watch()</li></ul><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><h3 id="安装wangdb库" tabindex="-1"><a class="header-anchor" href="#安装wangdb库" aria-hidden="true">#</a> 安装wangdb库</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>!pip install wandb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="官网注册获取api-key" tabindex="-1"><a class="header-anchor" href="#官网注册获取api-key" aria-hidden="true">#</a> 官网注册获取API Key</h3>`,10),b={href:"https://wandb.ai/",target:"_blank",rel:"noopener noreferrer"},m=e(`<p>一般用google账户或者github账户注册都行， 注册时注意保存username 注册成功会在这个页面有注册信息展示，api key也是在这个页面获取的</p><h3 id="在终端运行wandb-login" tabindex="-1"><a class="header-anchor" href="#在终端运行wandb-login" aria-hidden="true">#</a> 在终端运行wandb login</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>wandb<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输入API key</p><p>自动登录设置：运行 wandb login命令后， 会在/root/.netrc 下生成.netrc文件， 修改这个文件，这里的password就是第二步获取的api key，之后就不用输密码了</p><h3 id="初始化" tabindex="-1"><a class="header-anchor" href="#初始化" aria-hidden="true">#</a> 初始化</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> wandb

wandb<span class="token punctuation">.</span>init<span class="token punctuation">(</span>project<span class="token operator">=</span><span class="token string">&quot;my-project&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="声明超参数" tabindex="-1"><a class="header-anchor" href="#声明超参数" aria-hidden="true">#</a> 声明超参数</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>wandb<span class="token punctuation">.</span>config<span class="token punctuation">.</span>dropout <span class="token operator">=</span> <span class="token number">0.2</span>
wandb<span class="token punctuation">.</span>config<span class="token punctuation">.</span>hidden_layer_size <span class="token operator">=</span> <span class="token number">128</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="记录日志" tabindex="-1"><a class="header-anchor" href="#记录日志" aria-hidden="true">#</a> 记录日志</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">my_train_loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> epoch <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        loss <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment"># change as appropriate :)</span>
        wandb<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;epoch&#39;</span><span class="token punctuation">:</span> epoch<span class="token punctuation">,</span> <span class="token string">&#39;loss&#39;</span><span class="token punctuation">:</span> loss<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="发出报警" tabindex="-1"><a class="header-anchor" href="#发出报警" aria-hidden="true">#</a> 发出报警</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>acc_threshold = 0.3
if accuracy &lt;= acc_threshold:
        wandb.alert(
            title=&#39;Low Accuracy&#39;,
            text=f&#39;Accuracy {accuracy} at step {training_step} is below the acceptable theshold, {acc_threshold}&#39;,
        )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="保存文件" tabindex="-1"><a class="header-anchor" href="#保存文件" aria-hidden="true">#</a> 保存文件</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>wandb<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">&quot;mymodel.h5&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="查看wandb看板" tabindex="-1"><a class="header-anchor" href="#查看wandb看板" aria-hidden="true">#</a> 查看wandb看板</h3><p>打开运行结果里有火箭那一行的链接，浏览器中出现界面就说明成功了。</p>`,17);function v(g,k){const s=d("ExternalLinkIcon");return l(),o("div",null,[u,r(" more "),h,a("p",null,[n("官网："),a("a",b,[n("https://wandb.ai/"),c(s)])]),m])}const _=t(p,[["render",v],["__file","030_wandb.html.vue"]]);export{_ as default};
